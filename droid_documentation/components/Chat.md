
## components/Chat Directory

The `components/Chat` directory houses the React components that construct the chat interface of the application. This directory is responsible for user interaction with the chat system, including message input and display, error handling, and various settings adjustments.

### Contents

The `components/Chat` directory contains TypeScript files, each representing a unique React component. The files include:

- `Regenerate.tsx`: The file 'Regenerate.tsx' is a React component that provides a user interface for regenerating a response when an error occurs in the chat system. It uses the 'next-i18next' library for internationalization and translation. The component displays a fixed div at the bottom of the screen with an error message and a button. The button, when clicked, triggers the 'onRegenerate' function passed as a prop to the component. The button also contains an icon and a text that says 'Regenerate response'. The component is styled using Tailwind CSS classes.
- `PluginSelect.tsx`: Provides a dropdown selection interface for different plugins.
- `Temperature.tsx`: Provides a slider for adjusting the 'temperature' parameter in a chatbot conversation.
- `MemoizedChatMessage.tsx`: Exports a memoized version of the 'ChatMessage' component to optimize rendering.
- `ErrorMessageDiv.tsx`: Displays an error message in a structured format.
- `ModelSelect.tsx`: Provides a dropdown selection interface for different AI models.
- `ChatLoader.tsx`: Displays a loading animation for the chat interface.
- `SystemPrompt.tsx`: The file 'SystemPrompt.tsx' is a React component that handles the system prompts in a chat conversation. It imports necessary hooks and types from 'react' and 'next-i18next', as well as some constants and types from the application's utility and types directories. The component takes in a conversation object, an array of prompts, and a function to change the prompt as props. It maintains several pieces of state, including the current value of the prompt, the active prompt index, whether the prompt list is visible, the prompt input value, an array of variables, and whether a modal is visible. The component defines several functions to handle changes in the prompt, select a prompt, submit updated variables, and handle keydown events. It also has effects to handle changes in the conversation prompt, resize the textarea, and handle clicks outside the prompt list. The component returns a div containing a label, a textarea for the prompt, a list of prompts if the prompt list is visible, and a modal for variables if the modal is visible.
- `VariableModal.tsx`: Provides a modal for handling variables in a chat application.
- `ChatMessage.tsx`: The 'ChatMessage.tsx' file is a React component that represents a single chat message in a chat interface. It imports various icons, hooks, and utilities from different libraries and local files. The component takes a 'message' object and a 'messageIndex' as props, and optionally an 'onEdit' function. The 'message' object is of type 'Message' which is defined in '@/types/chat'. The component maintains local state for editing and typing status, message content, and copy status. It also uses the 'HomeContext' to access and manipulate the global state. The component provides functionalities to edit, delete, and copy a chat message. It also handles the display of the message based on the role of the sender (user or assistant). The component also includes a Markdown parser for the message content, with custom renderers for code blocks, tables, and table cells. It also includes a copy button for the message content.
- `ChatInput.tsx`: The 'ChatInput.tsx' file is a React component that provides the input functionality for a chat application. It imports various icons, hooks, and types from different libraries and files. The component takes several props including functions for sending messages, regenerating the chat, scrolling down, and references for stopping the conversation and the textarea. It uses the 'HomeContext' to access the state and dispatch function of the home page. The component maintains several pieces of state including the content of the message, whether the user is typing, whether the prompt list is visible, the active prompt index, the prompt input value, the variables, whether the modal is visible, whether the plugin select is visible, and the selected plugin. The component also contains several functions for handling changes, sending messages, stopping the conversation, initializing the modal, handling key down events, parsing variables, updating the prompt list visibility, selecting prompts, and submitting the form. The component returns a div that contains the chat input interface, a plugin select interface, a textarea for input, a send button, a scroll down button, a prompt list, and a variable modal. It also includes a footer with a link to the project's GitHub page and a description of the project.
- `Chat.tsx`: The 'Chat.tsx' file is a React component that manages the chat functionality of the application. It imports various hooks and components from React and other libraries, as well as types and utility functions from the application's own modules. The main export is a memoized functional component named 'Chat', which takes a 'stopConversationRef' prop. Inside this component, several pieces of state are managed, including the current message, auto-scroll settings, and visibility of certain UI elements. The component defines several functions including 'handleSend', 'scrollToBottom', 'handleScroll', 'handleScrollDown', 'handleSettings', 'onClearAll', 'scrollDown', and 'throttledScrollDown'. These functions handle various aspects of the chat functionality such as sending messages, managing conversations, scrolling, and managing settings. The component returns a JSX structure, which includes various child components and elements such as 'MemoizedChatMessage', 'ChatLoader', and 'ChatInput'. The 'Chat' component also has a displayName property set to 'Chat'.
- `PromptList.tsx`: Renders a list of prompts.

### Usage & Examples

The components in this directory are used to build the chat interface of the application. Examples of how these components are used within the codebase will be added in the 'Usage & Examples' section.
